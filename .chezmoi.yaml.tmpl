{{- $codespaces := env "CODESPACES" | not | not -}}
{{- $interactive := and (not $codespaces) stdinIsATTY -}}
{{- $email := get . "email" -}}
{{- if not $email -}}
{{-   if $interactive -}}
{{-     $email = promptString "email" -}}
{{-   else -}}
{{-     $email = "ross@zombiezen.com" -}}
{{-   end -}}
{{- end -}}
{{- $personal_machines_authorized := false -}}
{{- if hasKey . "personal_machines_authorized" -}}
{{-   $personal_machines_authorized = get . "personal_machines_authorized" -}}
{{- else if and $interactive (ne .chezmoi.os "windows") -}}
{{-   $personal_machines_authorized = promptBool "allow SSH from personal machines" -}}
{{- end -}}
sourceDir: {{ .chezmoi.sourceDir | toJson }}
data:
  email: {{ $email | toJson }}
  personal_machines_authorized: {{ $personal_machines_authorized }}
  {{- with get . "bin_path" }}
  bin_path: {{ . | toJson }}
  {{- else }}
  bin_path: []
  {{- end }}
  {{- with get . "env" }}
  env: {{ . | toJson }}
  {{- else }}
  env: {}
  {{- end }}
  # If you're on a particularly nasty system, set to false:
  global_rcs: {{ if hasKey . "global_rcs" }}{{ .global_rcs }}{{ else }}true{{ end }}
  # If your terminal supports true colors, then set to true:
  terminal_true_colors: {{ if hasKey . "terminal_true_colors" }}{{ .terminal_true_colors }}{{ else }}false{{ end }}
  # If you're on Crostini and want the GNOME keyring daemon, then set to true:
  gnome_keyring: {{ if hasKey . "gnome_keyring" }}{{ .gnome_keyring }}{{ else }}false{{ end }}
